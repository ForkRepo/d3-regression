!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):(n=n||self,r(n.d3=n.d3||{}))}(this,function(n){"use strict";function r(n,r,t,e,u){for(var o=n.length,i=0,a=0,f=0;f<o;f++){var c=n[f],h=r(c),l=t(c),v=u(h);i+=Math.pow(l-v,2),a+=Math.pow(l-e/o,2)}return 1-i/a}function t(n){return 180*Math.atan2(n[1][1]-n[0][1],n[1][0]-n[0][0])/Math.PI}function e(n){return[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]}function u(n,r,u){function o(n){return[n,u(n)]}for(var i=.01,a=[o(n),o(r)],f=0;function(n){f++;for(var r=n.length,u=!1,a=0;a<r-1;a++){var c=n[a],h=n[a+1],l=e([c,h]),v=o(l[0]),g=t([c,l]),s=t([c,v]);Math.abs(g-s)>i&&(n.splice(a+1,0,v),u=!0)}return u}(a)&&f<1e4;);return a}function o(n,r,t,e){for(var u=0,o=0,i=n.length;o<i;o++){var a=n[o],f=r(a),c=t(a);null!=f&&isFinite(f)&&null!=c&&isFinite(c)&&e(f,c,u++)}}function i(){function n(n){var a=0,f=0,c=0,h=0,l=0,v=t?+t[0]:1/0,g=t?+t[1]:-1/0;o(n,e,i,function(n,r){a+=r,f+=n*n*r,c+=r*Math.log(r),h+=n*r*Math.log(r),l+=n*r,t||(n<v&&(v=n),n>g&&(g=n))});var s=a*f-l*l,M=Math.exp((f*c-l*h)/s),d=(a*h-l*c)/s,p=function(n){return M*Math.exp(d*n)},b=u(v,g,p);return b.a=M,b.b=d,b.predict=p,b.rSquared=r(n,e,i,a,p),b}var t,e=function(n){return n[0]},i=function(n){return n[1]};return n.domain=function(r){return arguments.length?(t=r,n):t},n.x=function(r){return arguments.length?(e=r,n):e},n.y=function(r){return arguments.length?(i=r,n):i},n}function a(){function n(n){var i=0,a=0,f=0,c=0,h=0,l=t?+t[0]:1/0,v=t?+t[1]:-1/0;o(n,e,u,function(n,r){++i,a+=n,f+=r,c+=n*r,h+=n*n,t||(n<l&&(l=n),n>v&&(v=n))});var g=(i*c-a*f)/(i*h-a*a),s=(f-g*a)/i,M=function(n){return g*n+s},d=[[l,M(l)],[v,M(v)]];return d.a=g,d.b=s,d.predict=M,d.rSquared=r(n,e,u,f,M),d}var t,e=function(n){return n[0]},u=function(n){return n[1]};return n.domain=function(r){return arguments.length?(t=r,n):t},n.x=function(r){return arguments.length?(e=r,n):e},n.y=function(r){return arguments.length?(u=r,n):u},n}function f(n){n.sort(function(n,r){return n-r});var r=n.length/2;return r%1==0?(n[r-1]+n[r])/2:n[Math.floor(r)]}function c(n,r){return n.sort(function(n,t){return r(n)-r(t)})}function h(){function n(n){var i=n.length,a=Math.max(2,~~(e*i)),h=[],s=[],M=[],d=[],p=[];c(n=n.slice(),r);for(var b=0,w=0;b<i;++b){var x=n[b],y=r(x,b,n),m=t(x,b,n);null!=y&&isFinite(y)&&null!=m&&isFinite(m)&&(h[w]=y,s[w]=m,M[w]=0,d[w]=0,p[w]=1,++w)}for(var F=h.length,q=-1;++q<=u;){for(var S=[0,a-1],P=0;P<F;++P){for(var L=h[P],j=S[0],k=S[1],_=L-h[j]>h[k]-L?j:k,E=0,I=0,O=0,Q=0,z=0,A=1/Math.abs(h[_]-L||1),B=j;B<=k;++B){var C=h[B],D=s[B],G=l(Math.abs(L-C)*A)*p[B],H=C*G;E+=G,I+=H,O+=C*H,Q+=D*G,z+=D*H}var J=I/E,K=Q/E,N=z/E,R=O/E,T=Math.sqrt(Math.abs(R-J*J))<o?0:(N-J*K)/(R-J*J),U=K-T*J;M[P]=T*L+U,d[P]=Math.abs(s[P]-M[P]),v(h,P+1,S)}if(q===u)break;var V=f(d);if(Math.abs(V)<o)break;for(var W,X,Y=0;Y<F;++Y)W=d[Y]/(6*V),p[Y]=W>=1?o:(X=1-W*W)*X}return g(h,M)}var r=function(n){return n[0]},t=function(n){return n[1]},e=.3,u=2,o=1e-12;return n.bandwidth=function(r){return arguments.length?(e=r,n):e},n.x=function(t){return arguments.length?(r=t,n):r},n.y=function(r){return arguments.length?(t=r,n):t},n}function l(n){return(n=1-n*n*n)*n*n}function v(n,r,t){var e=n[r],u=t[0],o=t[1]+1;if(!(o>=n.length))for(;r>u&&n[o]-e<=e-n[u];)t[0]=++u,t[1]=o,++o}function g(n,r){for(var t,e=n.length,u=[],o=0,i=0,a=[];o<e;++o)t=n[o],a[0]===t?a[1]+=(r[o]-a[1])/++i:(i=0,a=[t,r[o]],u.push(a));return u}function s(){function n(n){var a=0,f=0,c=0,h=0,l=0,v=t?+t[0]:1/0,g=t?+t[1]:-1/0;o(n,e,i,function(n,r){++a,f+=Math.log(n),c+=r*Math.log(n),h+=r,l+=Math.pow(Math.log(n),2),t||(n<v&&(v=n),n>g&&(g=n))});var s=(a*c-h*f)/(a*l-f*f),M=(h-s*f)/a,d=function(n){return s*Math.log(n)+M},p=u(v,g,d);return p.a=s,p.b=M,p.predict=d,p.rSquared=r(n,e,i,h,d),p}var t,e=function(n){return n[0]},i=function(n){return n[1]};return n.domain=function(r){return arguments.length?(t=r,n):t},n.x=function(r){return arguments.length?(e=r,n):e},n.y=function(r){return arguments.length?(i=r,n):i},n}function M(){function n(n){for(var i=n.length,a=0,f=0,c=0,h=0,l=0,v=0,g=0,s=0,M=t?+t[0]:1/0,d=t?+t[1]:-1/0,p=0;p<i;p++){var b=n[p],w=e(b,p,n),x=o(b,p,n),y=Math.pow(w,2);null!=w&&isFinite(w)&&null!=x&&isFinite(x)&&(a++,f+=w,c+=x,h+=y,l+=Math.pow(w,3),v+=Math.pow(w,4),g+=w*x,s+=y*x,t||(w<M&&(M=w),w>d&&(d=w)))}i=a;var m=h-Math.pow(f,2)/i,F=g-f*c/i,q=l-h*f/i,S=s-h*c/i,P=v-Math.pow(h,2)/i,L=(S*m-F*q)/(m*P-Math.pow(q,2)),j=(F*P-S*q)/(m*P-Math.pow(q,2)),k=c/i-j*(f/i)-L*(h/i),_=function(n){return L*Math.pow(n,2)+j*n+k},E=u(M,d,_);return E.a=L,E.b=j,E.c=k,E.predict=_,E.rSquared=r(n,e,o,c,_),E}var t,e=function(n){return n[0]},o=function(n){return n[1]};return n.domain=function(r){return arguments.length?(t=r,n):t},n.x=function(r){return arguments.length?(e=r,n):e},n.y=function(r){return arguments.length?(o=r,n):o},n}function d(){function n(n){if(1===i){var f=a().x(e).y(o).domain(t)(n);return f.coefficients=[f.b,f.a],delete f.a,delete f.b,f}if(2===i){var c=M().x(e).y(o).domain(t)(n);return c.coefficients=[c.c,c.b,c.a],delete c.a,delete c.b,delete c.c,c}for(var h=[],l=0,v=t?+t[0]:1/0,g=t?+t[1]:-1/0,s=n.length,d=0;d<s;d++){var b=n[d],w=e(b,d,n),x=o(b,d,n);null!=w&&isFinite(w)&&null!=x&&isFinite(x)&&(h[d]=[w,x],l+=x,t||(w<v&&(v=w),w>g&&(g=w)))}s=h.length;for(var y=[],m=[],F=i+1,q=0,S=0,P=0;P<F;P++){for(var L=0;L<s;L++)q+=Math.pow(h[L][0],P)*h[L][1];y.push(q),q=0;for(var j=[],k=0;k<F;k++){for(var _=0;_<s;_++)S+=Math.pow(h[_][0],P+k);j[k]=S,S=0}m.push(j)}m.push(y);var E=p(m,F),I=function(n){return E.reduce(function(r,t,e){return r+t*Math.pow(n,e)},0)},O=u(v,g,I);return O.coefficients=E,O.predict=I,O.rSquared=r(n,e,o,l,I),O}var t,e=function(n){return n[0]},o=function(n){return n[1]},i=3;return n.domain=function(r){return arguments.length?(t=r,n):t},n.x=function(r){return arguments.length?(e=r,n):e},n.y=function(r){return arguments.length?(o=r,n):o},n.order=function(r){return arguments.length?(i=r,n):i},n}function p(n,r){for(var t=n.length-1,e=[r],u=0;u<t;u++){for(var o=u,i=u+1;i<t;i++)Math.abs(n[u][i])>Math.abs(n[u][o])&&(o=i);for(var a=u;a<t+1;a++){var f=n[a][u];n[a][u]=n[a][o],n[a][o]=f}for(var c=u+1;c<t;c++)for(var h=t;h>=u;h--)n[h][c]-=n[h][u]*n[u][c]/n[u][u]}for(var l=t-1;l>=0;l--){for(var v=0,g=l+1;g<t;g++)v+=n[g][l]*e[g];e[l]=(n[t][l]-v)/n[l][l]}return e}function b(){function n(n){var a=0,f=0,c=0,h=0,l=0,v=0,g=t?+t[0]:1/0,s=t?+t[1]:-1/0;o(n,e,i,function(n,r){a++,f+=Math.log(n),c+=Math.log(r)*Math.log(n),h+=Math.log(r),l+=Math.pow(Math.log(n),2),v+=r,t||(n<g&&(g=n),n>s&&(s=n))});var M=(a*c-f*h)/(a*l-Math.pow(f,2)),d=Math.exp((h-M*f)/a),p=function(n){return d*Math.pow(n,M)},b=u(g,s,p);return b.a=d,b.b=M,b.predict=p,b.rSquared=r(n,e,i,v,p),b}var t,e=function(n){return n[0]},i=function(n){return n[1]};return n.domain=function(r){return arguments.length?(t=r,n):t},n.x=function(r){return arguments.length?(e=r,n):e},n.y=function(r){return arguments.length?(i=r,n):i},n}n.regressionExp=i,n.regressionLinear=a,n.regressionLoess=h,n.regressionLog=s,n.regressionPoly=d,n.regressionPow=b,n.regressionQuad=M,Object.defineProperty(n,"__esModule",{value:!0})});