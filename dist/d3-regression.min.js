!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):(n=n||self,r(n.d3=n.d3||{}))}(this,function(n){"use strict";function r(n,r,t,e,u){for(var o=n.length,i=0,a=0,f=0;f<o;f++){var c=n[f],l=r(c),h=t(c),s=u(l);i+=Math.pow(h-s,2),a+=Math.pow(h-e/o,2)}return 1-i/a}function t(n){return 180*Math.atan2(n[1][1]-n[0][1],n[1][0]-n[0][0])/Math.PI}function e(n){return[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]}function u(n,r,u){function o(n){return[n,u(n)]}for(var i=.01,a=[o(n),o(r)],f=0;function(n){f++;for(var r=n.length,u=!1,a=0;a<r-1;a++){var c=n[a],l=n[a+1],h=e([c,l]),s=o(h[0]),v=t([c,h]),g=t([c,s]);Math.abs(v-g)>i&&(n.splice(a+1,0,s),u=!0)}return u}(a)&&f<1e4;);return a}function o(){function n(n){for(var i=n.length,a=0,f=0,c=0,l=0,h=0,s=t?+t[0]:1/0,v=t?+t[1]:-1/0,g=0;g<i;g++){var M=n[g],d=e(M,g,n),p=o(M,g,n);null!=d&&isFinite(d)&&null!=p&&isFinite(p)&&(a+=p,f+=d*d*p,c+=p*Math.log(p),l+=d*p*Math.log(p),h+=d*p,t||(d<s&&(s=d),d>v&&(v=d)))}var b=a*f-h*h,w=Math.exp((f*c-h*l)/b),x=(a*l-h*c)/b,y=function(n){return w*Math.exp(x*n)},F=u(s,v,y);return F.a=w,F.b=x,F.predict=y,F.rSquared=r(n,e,o,a,y),F}var t,e=function(n){return n[0]},o=function(n){return n[1]};return n.domain=function(r){return arguments.length?(t=r,n):t},n.x=function(r){return arguments.length?(e=r,n):e},n.y=function(r){return arguments.length?(o=r,n):o},n}function i(){function n(n){for(var o=n.length,i=0,a=0,f=0,c=0,l=0,h=t?+t[0]:1/0,s=t?+t[1]:-1/0,v=0;v<o;v++){var g=n[v],M=e(g,v,n),d=u(g,v,n);null!=M&&isFinite(M)&&null!=d&&isFinite(d)&&(i++,a+=M,f+=d,c+=M*d,l+=M*M,t||(M<h&&(h=M),M>s&&(s=M)))}o=i;var p=o*c,b=a*f,w=o*l,x=a*a,y=(p-b)/(w-x),F=f,m=y*a,q=(F-m)/o,S=function(n){return y*n+q},P=r(n,e,u,f,S),L=[[h,h*y+q],[s,s*y+q]];return L.a=y,L.b=q,L.predict=S,L.rSquared=P,L}var t,e=function(n){return n[0]},u=function(n){return n[1]};return n.domain=function(r){return arguments.length?(t=r,n):t},n.x=function(r){return arguments.length?(e=r,n):e},n.y=function(r){return arguments.length?(u=r,n):u},n}function a(n){n.sort(function(n,r){return n-r});var r=n.length/2;return r%1==0?(n[r-1]+n[r])/2:n[Math.floor(r)]}function f(n,r){return n.sort(function(n,t){return r(n)-r(t)})}function c(){function n(n){var i=n.length,c=Math.max(2,~~(e*i)),v=[],g=[],M=[],d=[],p=[];f(n=n.slice(),r);for(var b=0,w=0;b<i;++b){var x=n[b],y=r(x,b,n),F=t(x,b,n);null!=y&&isFinite(y)&&null!=F&&isFinite(F)&&(v[w]=y,g[w]=F,M[w]=0,d[w]=0,p[w]=1,++w)}for(var m=v.length,q=-1;++q<=u;){for(var S=[0,c-1],P=0;P<m;++P){for(var L=v[P],j=S[0],k=S[1],_=L-v[j]>v[k]-L?j:k,E=0,I=0,O=0,Q=0,z=0,A=1/Math.abs(v[_]-L||1),B=j;B<=k;++B){var C=v[B],D=g[B],G=l(Math.abs(L-C)*A)*p[B],H=C*G;E+=G,I+=H,O+=C*H,Q+=D*G,z+=D*H}var J=I/E,K=Q/E,N=z/E,R=O/E,T=Math.sqrt(Math.abs(R-J*J))<o?0:(N-J*K)/(R-J*J),U=K-T*J;M[P]=T*L+U,d[P]=Math.abs(g[P]-M[P]),h(v,P+1,S)}if(q===u)break;var V=a(d);if(Math.abs(V)<o)break;for(var W,X,Y=0;Y<m;++Y)W=d[Y]/(6*V),p[Y]=W>=1?o:(X=1-W*W)*X}return s(v,M)}var r=function(n){return n[0]},t=function(n){return n[1]},e=.3,u=2,o=1e-12;return n.bandwidth=function(r){return arguments.length?(e=r,n):e},n.x=function(t){return arguments.length?(r=t,n):r},n.y=function(r){return arguments.length?(t=r,n):t},n}function l(n){return(n=1-n*n*n)*n*n}function h(n,r,t){var e=n[r],u=t[0],o=t[1]+1;if(!(o>=n.length))for(;r>u&&n[o]-e<=e-n[u];)t[0]=++u,t[1]=o,++o}function s(n,r){for(var t,e=n.length,u=[],o=0,i=0,a=[];o<e;++o)t=n[o],a[0]===t?a[1]+=(r[o]-a[1])/++i:(i=0,a=[t,r[o]],u.push(a));return u}function v(){function n(n){for(var i=n.length,a=0,f=0,c=0,l=0,h=0,s=t?+t[0]:1/0,v=t?+t[1]:-1/0,g=0;g<i;g++){var M=n[g],d=e(M,g,n),p=o(M,g,n);null!=d&&isFinite(d)&&null!=p&&isFinite(p)&&(a++,f+=Math.log(d),c+=p*Math.log(d),l+=p,h+=Math.pow(Math.log(d),2),t||(d<s&&(s=d),d>v&&(v=d)))}i=a;var b=(i*c-l*f)/(i*h-f*f),w=(l-b*f)/i,x=function(n){return b*Math.log(n)+w},y=u(s,v,x);return y.a=b,y.b=w,y.predict=x,y.rSquared=r(n,e,o,l,x),y}var t,e=function(n){return n[0]},o=function(n){return n[1]};return n.domain=function(r){return arguments.length?(t=r,n):t},n.x=function(r){return arguments.length?(e=r,n):e},n.y=function(r){return arguments.length?(o=r,n):o},n}function g(){function n(n){for(var i=n.length,a=0,f=0,c=0,l=0,h=0,s=0,v=0,g=0,M=t?+t[0]:1/0,d=t?+t[1]:-1/0,p=0;p<i;p++){var b=n[p],w=e(b,p,n),x=o(b,p,n),y=Math.pow(w,2);null!=w&&isFinite(w)&&null!=x&&isFinite(x)&&(a++,f+=w,c+=x,l+=y,h+=Math.pow(w,3),s+=Math.pow(w,4),v+=w*x,g+=y*x,t||(w<M&&(M=w),w>d&&(d=w)))}i=a;var F=l-Math.pow(f,2)/i,m=v-f*c/i,q=h-l*f/i,S=g-l*c/i,P=s-Math.pow(l,2)/i,L=(S*F-m*q)/(F*P-Math.pow(q,2)),j=(m*P-S*q)/(F*P-Math.pow(q,2)),k=c/i-j*(f/i)-L*(l/i),_=function(n){return L*Math.pow(n,2)+j*n+k},E=u(M,d,_);return E.a=L,E.b=j,E.c=k,E.predict=_,E.rSquared=r(n,e,o,c,_),E}var t,e=function(n){return n[0]},o=function(n){return n[1]};return n.domain=function(r){return arguments.length?(t=r,n):t},n.x=function(r){return arguments.length?(e=r,n):e},n.y=function(r){return arguments.length?(o=r,n):o},n}function M(){function n(n){if(1===a){var f=i().x(e).y(o).domain(t)(n);return f.coefficients=[f.b,f.a],delete f.a,delete f.b,f}if(2===a){var c=g().x(e).y(o).domain(t)(n);return c.coefficients=[c.c,c.b,c.a],delete c.a,delete c.b,delete c.c,c}for(var l=[],h=0,s=t?+t[0]:1/0,v=t?+t[1]:-1/0,M=n.length,p=0;p<M;p++){var b=n[p],w=e(b,p,n),x=o(b,p,n);null!=w&&isFinite(w)&&null!=x&&isFinite(x)&&(l[p]=[w,x],h+=x,t||(w<s&&(s=w),w>v&&(v=w)))}M=l.length;for(var y=[],F=[],m=a+1,q=0,S=0,P=0;P<m;P++){for(var L=0;L<M;L++)q+=Math.pow(l[L][0],P)*l[L][1];y.push(q),q=0;for(var j=[],k=0;k<m;k++){for(var _=0;_<M;_++)S+=Math.pow(l[_][0],P+k);j[k]=S,S=0}F.push(j)}F.push(y);var E=d(F,m),I=function(n){return E.reduce(function(r,t,e){return r+t*Math.pow(n,e)},0)},O=u(s,v,I);return O.coefficients=E,O.predict=I,O.rSquared=r(n,e,o,h,I),O}var t,e=function(n){return n[0]},o=function(n){return n[1]},a=3;return n.domain=function(r){return arguments.length?(t=r,n):t},n.x=function(r){return arguments.length?(e=r,n):e},n.y=function(r){return arguments.length?(o=r,n):o},n.order=function(r){return arguments.length?(a=r,n):a},n}function d(n,r){for(var t=n.length-1,e=[r],u=0;u<t;u++){for(var o=u,i=u+1;i<t;i++)Math.abs(n[u][i])>Math.abs(n[u][o])&&(o=i);for(var a=u;a<t+1;a++){var f=n[a][u];n[a][u]=n[a][o],n[a][o]=f}for(var c=u+1;c<t;c++)for(var l=t;l>=u;l--)n[l][c]-=n[l][u]*n[u][c]/n[u][u]}for(var h=t-1;h>=0;h--){for(var s=0,v=h+1;v<t;v++)s+=n[v][h]*e[v];e[h]=(n[t][h]-s)/n[h][h]}return e}function p(){function n(n){for(var i=n.length,a=0,f=0,c=0,l=0,h=0,s=0,v=t?+t[0]:1/0,g=t?+t[1]:-1/0,M=0;M<i;M++){var d=n[M],p=e(d,M,n),b=o(d,M,n);null!=p&&isFinite(p)&&null!=b&&isFinite(b)&&(a++,f+=Math.log(p),c+=Math.log(b)*Math.log(p),l+=Math.log(b),h+=Math.pow(Math.log(p),2),s+=b,t||(p<v&&(v=p),p>g&&(g=p)))}i=a;var w=(i*c-f*l)/(i*h-Math.pow(f,2)),x=Math.exp((l-w*f)/i),y=function(n){return x*Math.pow(n,w)},F=u(v,g,y);return F.a=x,F.b=w,F.predict=y,F.rSquared=r(n,e,o,s,y),F}var t,e=function(n){return n[0]},o=function(n){return n[1]};return n.domain=function(r){return arguments.length?(t=r,n):t},n.x=function(r){return arguments.length?(e=r,n):e},n.y=function(r){return arguments.length?(o=r,n):o},n}n.regressionExp=o,n.regressionLinear=i,n.regressionLoess=c,n.regressionLog=v,n.regressionPoly=M,n.regressionPow=p,n.regressionQuad=g,Object.defineProperty(n,"__esModule",{value:!0})});